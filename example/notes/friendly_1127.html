<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><title>friendly</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
</head>
<body style="margin: 5px 5px 5px 5px; background-color: #ffffff;">
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;">"""Friendly Python SSH2 interface."""</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;">import os</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;">import tempfile</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;">import paramiko</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;">class Connection(object):</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;"""Connects and logs into the specified hostname.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;Arguments that are not given are guessed from the environment."""</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;def __init__(self,</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; host,</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; username = None,</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; private_key = None,</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; password = None,</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; port = 22,</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ):</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;self._sftp_live = False</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;self._sftp = None</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;if not username:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;username = os.environ['LOGNAME']</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;# Log to a temporary file.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;templog = tempfile.mkstemp('.txt', 'ssh-')[1]</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;paramiko.util.log_to_file(templog)</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;# Begin the SSH transport.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;self._transport = paramiko.Transport((host, port))</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;self._tranport_live = True</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;# Authenticate the transport.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;if password:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Using Password.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self._transport.connect(username = username, password = password)</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;else:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Use Private Key.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if not private_key:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Try to use default key.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if os.path.exists(os.path.expanduser('~/.ssh/id_rsa')):</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;private_key = '~/.ssh/id_rsa'</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;elif os.path.exists(os.path.expanduser('~/.ssh/id_dsa')):</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;private_key = '~/.ssh/id_dsa'</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;raise TypeError, "You have not specified a password or key."</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;private_key_file = os.path.expanduser(private_key)</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rsa_key = paramiko.RSAKey.from_private_key_file(private_key_file)</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self._transport.connect(username = username, pkey = rsa_key)</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;def _sftp_connect(self):</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;"""Establish the SFTP connection."""</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;if not self._sftp_live:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self._sftp = paramiko.SFTPClient.from_transport(self._transport)</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self._sftp_live = True</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;def get(self, remotepath, localpath = None):</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;"""Copies a file between the remote host and the local host."""</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;if not localpath:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;localpath = os.path.split(remotepath)[1]</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;self._sftp_connect()</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;self._sftp.get(remotepath, localpath)</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;def put(self, localpath, remotepath = None):</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;"""Copies a file between the local host and the remote host."""</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;if not remotepath:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;remotepath = os.path.split(localpath)[1]</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;self._sftp_connect()</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;self._sftp.put(localpath, remotepath)</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;def execute(self, command):</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;"""Execute the given commands on a remote machine."""</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;channel = self._transport.open_session()</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;channel.exec_command(command)</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;output = channel.makefile('rb', -1).readlines()</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;if output:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return output</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;else:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return channel.makefile_stderr('rb', -1).readlines()</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;def close(self):</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;"""Closes the connection and cleans up."""</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;# Close SFTP Connection.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;if self._sftp_live:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self._sftp.close()</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self._sftp_live = False</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;# Close the SSH Transport.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;if self._tranport_live:</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self._transport.close()</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self._tranport_live = False</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;def __del__(self):</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;"""Attempt to clean up if not explicitly closed."""</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;self.close()</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;">def main():</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;"""Little test when called directly."""</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;# Set these to your own details.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;private_key = r"C:\SEDOVANTON\id_rsa"</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;myssh = Connection('sedovanton.bstudent01c.yandex.net','sedovanton' , private_key)</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;myssh.put('ssh.py')</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;myssh.close()</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"><br></span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"># start the ball rolling.</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;">if __name__ == "__main__":</span></p>
<p style=" text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><span style=" font-size: 11pt; font-family: 'Verdana', 'Geneva', sans-serif; font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;"> &nbsp; &nbsp;main()</span></p>
</body></html>
